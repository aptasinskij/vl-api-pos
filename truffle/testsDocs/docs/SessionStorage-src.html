<!doctype html><html> <head> <meta charset="utf-8"> <title>Source code of SessionStorage.js</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="css/docs.css"> </head> <body id="cjs-src"> <!-- Generated with comment.js --> <pre class="prettyprint linenums cjs-pre"><code class="cjs-code">const assert = require(&#39;chai&#39;).assert;
const SessionStorage = artifacts.require(&#39;SessionStorage.sol&#39;);
const {convertToNumber} = require(&#39;..&#47;helpers&#39;);

&#47;*\
* SessionStorage
\*&#47;

contract(&#39;SessionStorage&#39;, () =&#62; {

    describe(&#39;tests for all methods&#39;, () =&#62; {
        let resSave;
        let resGetSession;
        let resGetStatusAndXToken;
        let resGetAppId;
        let resGetXToken;
        let resGetAppIdAndXToken;
        let resSetStatus;
        let resGetStatus;
        let resGetSessionAfterAll;

        before(async () =&#62; {
            const instance = await SessionStorage.deployed();
            &#47;* save *&#47;
            resSave = await instance.save(1, 2, &#39;1a2b3c&#39;, 3);
            resSave = convertToNumber(resSave.logs[0].args);
            &#47;* getSession *&#47;
            resGetSession = await instance.getSession(1);
            resGetSession = convertToNumber(resGetSession);
            &#47;* getStatusAndXToken *&#47;
            resGetStatusAndXToken = await instance.getStatusAndXToken(1);
            resGetStatusAndXToken = convertToNumber(resGetStatusAndXToken);
            &#47;* getAppId *&#47;
            resGetAppId = await instance.getAppId(1);
            resGetAppId = Number(resGetAppId);
            &#47;* getXToken *&#47;
            resGetXToken = await instance.getXToken(1);
            &#47;* getAppIdAndXToken *&#47;
            resGetAppIdAndXToken = await instance.getAppIdAndXToken(1);
            resGetAppIdAndXToken = convertToNumber(resGetAppIdAndXToken);
            &#47;* setStatus *&#47;
            resSetStatus = await instance.setStatus(1, 9);
            resSetStatus = convertToNumber(resSetStatus.logs[0].args);
            &#47;* getStatus *&#47;
            resGetStatus = await instance.getStatus(1);
            resGetStatus = Number(resGetStatus);
            &#47;* getSession (after all) *&#47;
            resGetSessionAfterAll = await instance.getSession(1);
            resGetSessionAfterAll = convertToNumber(resGetSessionAfterAll);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; Save(sessionId, appId, xToken, status) &#60;&#47;h4&#62;
         # Save new session
         &#62; Arguments
         - (uint256) sessionId - session id
         - (uint256) appId - application id
         - (string) xToken - session xToken
         - (uint256) status - session status
         &#62; Emits
         - (event) Saved
        \*&#47;
        it(&#39;save&#39;, () =&#62; {
            assert.strictEqual(resSave.sessionId, 1, &#39;session Id is not equal&#39;);
            assert.strictEqual(resSave.appId, 2, &#39;application Id is not equal&#39;);
            assert.strictEqual(resSave.xToken, &#39;1a2b3c&#39;, &#39;xToken is not equal&#39;);
            assert.strictEqual(resSave.status, 3, &#39;status is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getSession(index) &#60;&#47;h4&#62;
         # Get session info
         &#62; Arguments
         - (uint256) index - session id
         &#62; Returns
         - (uint256) appId - application id
         - (string) xToken - session xToken
         - (uint256) status - session status
        \*&#47;
        it(&#39;getSession&#39;, () =&#62; {
            assert.strictEqual(resGetSession[0], 2, &#39;application Id is not equal&#39;);
            assert.strictEqual(resGetSession[1], &#39;1a2b3c&#39;, &#39;xToken Id is not equal&#39;);
            assert.strictEqual(resGetSession[2], 3, &#39;status Id is not equal&#39;);
            &#47;* after all *&#47;
            assert.strictEqual(resGetSessionAfterAll[0], 2, &#39;application Id is not equal (after all)&#39;);
            assert.strictEqual(resGetSessionAfterAll[1], &#39;1a2b3c&#39;, &#39;xToken Id is not equal (after all)&#39;);
            assert.strictEqual(resGetSessionAfterAll[2], 9, &#39;status Id is not equal (after all)&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getStatusAndXToken(index) &#60;&#47;h4&#62;
         # Get session status and xToken
         &#62; Arguments
         - (uint256) index - session id
         &#62; Returns
         - (string) xToken - session xToken
         - (uint256) status - session status
        \*&#47;
        it(&#39;getStatusAndXToken&#39;, () =&#62; {
            assert.strictEqual(resGetStatusAndXToken[0], 3, &#39;status Id is not equal&#39;);
            assert.strictEqual(resGetStatusAndXToken[1], &#39;1a2b3c&#39;, &#39;xToken is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getAppId(index) &#60;&#47;h4&#62;
         # Get application ID of session
         &#62; Arguments
         - (uint256) index - session index
         &#62; Returns
         - (uint256) appId - application id
        \*&#47;
        it(&#39;getAppId&#39;, () =&#62; {
            assert.strictEqual(resGetAppId, 2, &#39;application Id Id is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getXToken(index) &#60;&#47;h4&#62;
         # Get session xToken
         &#62; Arguments
         - (uint256) index - session id
         &#62; Returns
         - (string) xToken - session xToken
        \*&#47;
        it(&#39;getXToken&#39;, () =&#62; {
            assert.strictEqual(resGetXToken, &#39;1a2b3c&#39;, &#39;xToken is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getAppIdAndXToken(index) &#60;&#47;h4&#62;
         # Get application ID and xToken of session
         &#62; Arguments
         - (uint256) index - session id
         &#62; Returns
         - (uint256) appId - application id
         - (string) xToken - session xToken
        \*&#47;
        it(&#39;getAppIdAndXToken&#39;, () =&#62; {
            assert.strictEqual(resGetAppIdAndXToken[0], 2, &#39;application Id is not equal&#39;);
            assert.strictEqual(resGetAppIdAndXToken[1], &#39;1a2b3c&#39;, &#39;xToken is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; setStatus(index, status) &#60;&#47;h4&#62;
         # Set session status
         &#62; Arguments
         - (uint256) index - session id
         - (uint256) status - session status
         &#62; Emits
         - (event) StatusUpdated
        \*&#47;
        it(&#39;setStatus&#39;, () =&#62; {
            assert.strictEqual(resSetStatus.index, 1, &#39;session Id is not equal&#39;);
            assert.strictEqual(resSetStatus.status, 9, &#39;status is not equal&#39;);
        });

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; getStatus(index) &#60;&#47;h4&#62;
         # Get session status
         &#62; Arguments
         - (uint256) index - session id
         &#62; Returns
         - (uint256) status - session status
        \*&#47;
        it(&#39;getStatus&#39;, () =&#62; {
            assert.strictEqual(resGetStatus, 9, &#39;status is not equal&#39;);
        });

        &#47;* events description *&#47;

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; Saved &#60;&#47;h4&#62;
         # Get info of saved session (emits on &#34;save&#34; method call)
         &#62; Returns
         - (uint256) sessionId - session id
         - (uint256) appId - application id
         - (string) xToken - application xToken
         - (uint256) status - application status
        \*&#47;

        &#47;*\
         # &#60;hr&#62;
         # &#60;h4&#62; StatusUpdated &#60;&#47;h4&#62;
         # Get updated status of session (emits on &#34;setStatus&#34; method call)
         &#62; Returns
         - (uint256) index - session id
         - (uint256) status - session status
        \*&#47;
    })
});
</code></pre> <script src="js/prettify.js"></script> <script src="js/src.js"></script> </body></html>